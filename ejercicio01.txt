% --- HECHOS PROPORCIONADOS ---
ubicacion(orilla_inicial, 0, 5).
ubicacion(piedra1, 2, 4).
ubicacion(piedra2, 5, 6).
ubicacion(piedra3, 8, 4).
ubicacion(piedra4, 5, 0).
ubicacion(orilla_final, 10, 5).
salto_maximo(4.0).
meta(pos(orilla_final)).
% --- DISTANCIA ---
distancia_valida(L1, L2) :-
    ubicacion(L1, X1, Y1),
    ubicacion(L2, X2, Y2),
    L1 \= L2, % No saltar en el mismo lugar
    Distancia is sqrt((X2 - X1)^2 + (Y2 - Y1)^2), % Distancia euclidiana
    salto_maximo(Max),
    Distancia =< Max.

% --- siguiente_estado ---
siguiente_estado(pos(LugarActual), pos(LugarSiguiente)) :-
    distancia_valida(LugarActual, LugarSiguiente).

% --- ALGORITMO DFS (Búsqueda en Profundidad) ---
% Caso base: 
dfs(EstadoActual, _, [EstadoActual]) :- meta(EstadoActual).

% Caso recursivo:
dfs(EstadoActual, Visitados, [EstadoActual|Camino]) :-
    siguiente_estado(EstadoActual, ProximoEstado),
    \+ member(ProximoEstado, Visitados), % Evita ciclos
    dfs(ProximoEstado, [ProximoEstado | Visitados], Camino).

% --- INICIAR BÚSQUEDA ---
buscar_solucion(Solucion) :-
    EstadoInicial = pos(orilla_inicial),
    dfs(EstadoInicial, [EstadoInicial], Solucion).

% --- Query ---
% buscar_solucion(Solucion)
% Solucion = [pos(orilla_inicial), pos(piedra1), pos(piedra2), pos(piedra3), pos(orilla_final)]
